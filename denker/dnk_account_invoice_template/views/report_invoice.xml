<odoo>
    <template id="dnk_report_invoice_document_denker" inherit_id="account.report_invoice_document">
      <t t-set="address" position="replace">

          <table cellpadding="10" width="100%" style="font-size:10px;">
              <thead>
              </thead>
              <tbody>
                  <tr style="background-color:transparent;">
                      <t t-set="primary_color" t-value="'background-color:'+o.company_id.primary_background_color+';text-transform: uppercase;color:'+o.company_id.primary_color"/>
                      <td width="40%" style="font-size:10px;">
                          <address t-field="o.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                          <div t-if="o.partner_id.vat" class="mt16">
                              <t t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label" id="inv_tax_id_label"/>
                              <t t-else="">Tax ID</t>: <span t-field="o.partner_id.vat"/></div>
                      </td>
                      <td width="40%" style="font-size:10px;">
                          <t t-if="o.partner_shipping_id and (o.partner_shipping_id != o.partner_id)">
                              <t t-set="information_block">
                                  <div groups="sale.group_delivery_invoice_address">
                                      <strong>Shipping Address:</strong>
                                      <div t-field="o.partner_shipping_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}"/>
                                  </div>
                              </t>
                          </t>
                          <t t-if="information_block">
                              <div name="information_block">
                                  <t t-raw="information_block"/>
                                  <!--<t t-raw="primary_color"/>-->
                              </div>
                          </t>
                          <div t-else="" t-field="o.partner_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;], &quot;no_marker&quot;: True}" groups="sale.group_delivery_invoice_address"/>
                          <br/><b>Expedition place: </b><span t-field="o.company_id.city"/>, <span t-field="o.company_id.state_id.name"/> <span t-field="o.company_id.country_id.name"/>.<br/><br/>
                      </td>
                      <td width="20%" style="font-size:12px;">
                          <h4>
                              <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'" style="font-size:14px;">Invoice</span>
                              <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'" style="font-size:14px;">Draft Invoice</span>
                              <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'" style="font-size:14px;">Cancelled Invoice</span>
                              <span t-if="o.move_type == 'out_refund'" style="font-size:14px;">Credit Note</span>
                              <span t-if="o.move_type == 'in_refund'" style="font-size:14px;">Vendor Credit Note</span>
                              <span t-if="o.move_type == 'in_invoice'" style="font-size:14px;">Vendor Bill</span>
                              <span t-if="o.name != '/'" style="font-size:14px;" t-field="o.name"/>
                          </h4>
                      </td>
                  </tr>
              </tbody>
          </table>
      </t>

      <!-- Modificar el tamaño de la fuente de todo el documento -->
      <xpath expr="//div[@class='page']" position="attributes">
          <attribute name="style">font-size:70%;</attribute>
      </xpath>

       <!-- Quitar el nombre de la factura porque lo estoy poniendo en la tabla de aquí arriba -->
      <xpath expr="//h2" position="replace">
      </xpath>

       <!-- Product Code -->
      <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[1]" position="before">
          <th>Internal Code</th>
      </xpath>

      <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t/td[1]" position="before">
          <td><span t-field="line.product_id.default_code"/></td>
      </xpath>

      <!-- Agregar Sequence -->
      <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[1]" position="before">
          <th>Sequence</th>
      </xpath>
      <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t/td[1]" position="before">
          <td align="left"><span t-esc="line_index + 1"/></td>
      </xpath>

      <!-- Price Subtotal -->
      <!--
      <xpath expr="//table[@name='invoice_line_table']/thead/tr/th[5]" position="before">
          <th>Subtotal</th>
      </xpath>
      <xpath expr="//table[@name='invoice_line_table']/tbody/t/tr/t/td[5]" position="before">
          <td><span t-field="line.price_subtotal"/></td>
      </xpath>-->

      <!-- Observaciones en Inglish -->
      <xpath expr="//div[@name='comment']" position="after">
          <t t-if="o.company_id.currency_id.id != o.currency_id.id">
              <div style="padding:5px; font-size: 8pt;">
                  <p>
                      <div><strong>Currency:</strong> <span t-field="o.currency_id"/>-<span t-field="o.currency_id.currency_unit_label"/></div>
                      <div><strong>Currency Rate:</strong> <span t-esc="1/o.currency_id.rate"/></div>
                  </p>
              </div>
          </t>
          <div colspan="7" style="text-align: justify;'">
              <b>Observations: </b>
              I must and will unconditionally pay to <span t-field="o.company_id.name"/> in the city of <span t-field="o.company_id.city"/>
              or wherever the holder chooses, on date <span t-field="o.invoice_date_due"/> the amount of
              <span t-field="o.amount_total"/> (<span t-esc="o._l10n_mx_edi_cfdi_amount_to_text()"/>),
              merchandise and/or services covered in this invoice that I have received to my satisfaction.
              If this promissory note is not settled on the due date, I will pay the 5% (five percent) monthly from the due date.
              This promissory note is commercial and is governed by the provisions of the Law on Securities and Credit Operations.
              <center>
              <br/><br/><br/>
              <hr style="width:30%;text-align:left;margin-left:0"/><br/>
              Signature of Received and Compliance
              </center>
          </div>
      </xpath>




      <!-- Aquí se supone que pongo los divs de información de la factura que acababa de quitar -->
      <xpath expr="//div[@id='informations']" position="after">
          <div id="informations" class="row mt32 mb32">
              <div class="col-3" t-if="o.invoice_date" name="invoice_date">
                  <strong>Invoice Date:</strong>
                  <p class="m-0" t-field="o.invoice_date"/>
              </div>
              <div class="col-3" t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" name="due_date">
                  <strong>Due Date:</strong>
                  <p class="m-0" t-field="o.invoice_date_due"/>
              </div>
              <div class="col-3" t-if="o.invoice_origin" name="origin">
                  <strong>Source:</strong>
                  <p class="m-0" t-field="o.invoice_origin"/>
              </div>
              <!--<div class="col-3" t-if="o.partner_id.ref" name="customer_code">
                  <strong>Customer Code:</strong>
                  <p class="m-0" t-field="o.partner_id.ref"/>
              </div>-->
              <div class="col-3" t-if="o.ref" name="reference">
                  <strong>Purchase Order:</strong>
                  <p class="m-0" t-field="o.ref"/>
              </div>
              <!--
              <div class="col-3" t-if="o.invoice_incoterm_id" groups="sale_stock.group_display_incoterm" name="invoice_incoterm_id">
                  <strong>Incoterm:</strong>
                  <p class="m-0" t-field="o.invoice_incoterm_id.code"/>
              </div>-->
          </div>


          <div id="informations" class="row mt32 mb32">
              <t t-if="o.l10n_mx_edi_cfdi_uuid">
                  <div name="usage" class="col-3">
                      <strong>Usage:</strong>
                      <p><span t-field="o.l10n_mx_edi_usage"/></p>
                  </div>
                  <t t-if="o.l10n_mx_edi_payment_method_id">
                      <div class="col-3">
                          <strong>Payment Way:</strong>
                          <p t-esc="' - '.join([o.l10n_mx_edi_payment_method_id.code, o.l10n_mx_edi_payment_method_id.name])"/>
                      </div>
                  </t>
                  <div class="col-3">
                      <strong>Payment Method:</strong>
                      <p><span t-field="o.l10n_mx_edi_payment_method_id"/></p>
                  </div>

                  <t t-if="o.invoice_payment_term_id">
                      <div class="col-3" t-if="o.invoice_payment_term_id" name="payment_term_id">
                          <strong>Payment Terms:</strong>
                          <p class="m-0" t-field="o.invoice_payment_term_id"/>
                      </div>
                  </t>
              </t>
          </div>


      </xpath>

      <!-- Quitar los divs de información de la Factura, los voy a poner yo, quesque -->
      <xpath expr="//div[@id='informations']" position="replace">
      </xpath>


    </template>
</odoo>
